/*!************************************************************************
*
* ADOBE CONFIDENTIAL
* ___________________
*
*  Copyright 2013 Adobe Systems Incorporated
*  All Rights Reserved.
*
* NOTICE:  All information contained herein is, and remains
* the property of Adobe Systems Incorporated and its suppliers,
* if any.  The intellectual and technical concepts contained
* herein are proprietary to Adobe Systems Incorporated and its
* suppliers and are protected by trade secret or copyright law.
* Dissemination of this information or reproduction of this material
* is strictly forbidden unless prior written permission is obtained
* from Adobe Systems Incorporated.
**************************************************************************/
if("undefined"==typeof s7viewers)s7viewers={};else if("object"!=typeof s7viewers)throw new Error("Cannot initialize a root 's7viewers' package. s7viewers is not an object");s7viewers.VideoViewer||function(){var e;s7viewers.VideoViewer=function(e){if(this.sdkBasePath="../../s7viewersdk/3.11/VideoViewer/",this.viewerFileName="VideoViewer.js",this.cssSrcURL="VideoViewer.css",this.utilsFilePath="js/s7sdk/utils/Utils.js",this.containerId=null,this.params={},this.handlers=[],this.onInitComplete=null,this.onInitFail=null,this.initializationComplete=!1,this.initCalled=!1,this.firstMediasetParsed=!1,this.isDisposed=!1,this.utilsScriptElm=null,this.fixinputmarker=null,this.sdkProvided=!1,this.lockurldomains=!0,"object"==typeof e){if(e.containerId&&this.setContainerId(e.containerId),e.params)for(var t in e.params)e.params.hasOwnProperty(t)&&e.params.propertyIsEnumerable(t)&&this.setParam(t,e.params[t]);e.handlers&&this.setHandlers(e.handlers),e.localizedTexts&&this.setLocalizedTexts(e.localizedTexts)}},s7viewers.VideoViewer.cssClassName="s7videoviewer",s7viewers.VideoViewer.prototype.modifiers={},s7viewers.VideoViewer.prototype.setContainerId=function(e){this.isDisposed||(this.containerId=e||null)},s7viewers.VideoViewer.getCodeBase=function(){var e="",t="",i=null;i=document.scripts?document.scripts:document.getElementsByTagName("script");for(var s=0;s<i.length;s++){var n=i[s].src,a=/^\s*(http[s]?:\/\/[^\/]*)?(.*)(\/(js|js_orig)\/VideoViewer\.js)/.exec(n);if(a&&5==a.length){void 0!==a[1]&&(e=a[1]),e+=a[2],t=n;break}}""!=e&&e.lastIndexOf("/")!=e.length-1&&(e+="/");s7viewers.VideoViewer.codebase={contentUrl:e,isDAM:/\/etc\/dam\/viewers\//.test(t)}},s7viewers.VideoViewer.getCodeBase(),s7viewers.VideoViewer.prototype.getContentUrl=function(){return s7viewers.VideoViewer.codebase.contentUrl},s7viewers.VideoViewer.prototype.symbols={"Container.LABEL":"Video viewer"},s7viewers.VideoViewer.prototype.includeViewer=function(){e.Util.lib.include("s7sdk.common.Button"),e.Util.lib.include("s7sdk.common.Container"),e.Util.lib.include("s7sdk.event.Event"),e.Util.lib.include("s7sdk.video.VideoControls"),e.Util.lib.include("s7sdk.video.VideoPlayer"),e.Util.lib.include("s7sdk.common.ControlBar"),e.Util.lib.include("s7sdk.set.MediaSet"),e.Util.lib.include("s7sdk.share.Share"),this.s7params=new e.ParameterManager(null,null,{asset:"MediaSet.asset"},this.getContentUrl()+this.cssSrcURL,this.lockurldomains);var t="";this.s7params.params.config&&"string"==typeof this.s7params.params.config&&(t=",",this.s7params.params.config.indexOf("/")>-1?t+=this.s7params.params.config.split("/")[1]:t+=this.s7params.params.config),this.s7params.setViewer("506,5.16.5"+t);var i={en:this.symbols,defaultLocale:"en"};for(var s in this.s7params.setDefaultLocalizedTexts(i),this.params)"localizedtexts"!=s?this.s7params.push(s,this.params[s]):this.s7params.setLocalizedTexts(this.params[s]);this.trackingManager=new e.TrackingManager,this.mediaSet=null,this.container=null,this.videoplayer=null,this.controls=null,this.playPauseButton=null,this.videoScrubber=null,this.videoTime=null,this.mutableVolume=null,this.fullScreenButton=null,this.closedCaptionButton=null,this.storedPlayingState=!1,this.socialShare=null,this.emailShare=null,this.embedShare=null,this.linkShare=null,this.twitterShare=null,this.facebookShare=null,this.captionButtonPosition=null,this.volumeButtonPosition=null,this.videoTimePosition=null,this.isCaption=!0,this.curCaption=null,this.storedCaptionEnabled=null,this.isNavigation=null,this.isPosterImage=null,this.fixTrackCSS=!1,this.storedSocialShareDisplayProp=null,this.supportsInline=null,this.isOrientationMarkerForcedChanged=!1;var n=this;function a(){n.s7params.push("aemmode",s7viewers.VideoViewer.codebase.isDAM?"1":"0");var t=n.containerId+"_container";n.s7params.push("autoplay","0"),n.s7params.push("singleclick","playPause"),n.s7params.push("iconeffect","1,-1,0.3,0"),n.s7params.push("bearing","fit-vertical"),n.s7params.push("initialbitrate","1400");var i=n.getParam("fixinputmarker");i&&(n.fixinputmarker="s7touchinput"==i||"s7mouseinput"==i?n.fixinputmarker=i:null);var s=n.getURLParameter("fixinputmarker");s&&(n.fixinputmarker="s7touchinput"==s||"s7mouseinput"==s?n.fixinputmarker=s:null),n.fixinputmarker?"s7mouseinput"===n.fixinputmarker?n.addClass(n.containerId,"s7mouseinput"):"s7touchinput"===n.fixinputmarker&&n.addClass(n.containerId,"s7touchinput"):e.browser.supportsTouch()?n.addClass(n.containerId,"s7touchinput"):n.addClass(n.containerId,"s7mouseinput"),n.parseMods(),n.container=new e.common.Container(n.containerId,n.s7params,t),n.container.isInLayout()?o():n.container.addEventListener(e.event.ResizeEvent.ADDED_TO_LAYOUT,o,!1)}function o(){n.container.removeEventListener(e.event.ResizeEvent.ADDED_TO_LAYOUT,o,!1);var t=document.getElementById(n.containerId),i=t.style.minHeight;t.style.minHeight="1px";var s=document.createElement("div");s.style.position="relative",s.style.width="100%",s.style.height="100%",t.appendChild(s);var a=s.offsetHeight;s.offsetHeight<=1&&(t.style.height="100%",a=s.offsetHeight),t.removeChild(s),t.style.minHeight=i;var r=!1;switch(n.s7params.get("responsive","auto")){case"fit":r=!1;break;case"constrain":r=!0;break;default:r=0==a}function l(e){n.videoplayer.pause()}function d(e){n.videoplayer.setVolume(e.s7event.position)}function c(){var e="";""!=n.s7params.params.style&&null!=n.s7params.params.style&&(e='    videoViewer.setParam("style", "'+n.s7params.params.style+'"); \n'),n.isCaption&&""!=n.curCaption&&null!=n.curCaption&&(e+='    videoViewer.setParam("caption", "'+n.curCaption+'"); \n'),n.isNavigation&&""!=n.isNavigation&&null!=n.isNavigation&&(e+='    videoViewer.setParam("navigation", "'+n.isNavigation+'"); \n');var t="";""!=n.s7params.params.config&&null!=n.s7params.params.config&&(t='    videoViewer.setParam("config", "'+n.s7params.params.config+'"); \n');var i="";return""!=n.s7params.params.config2&&null!=n.s7params.params.config2&&(i='\t\tvideoViewer.setParam("config2", "'+n.s7params.params.config2+'"); \n'),'<script language="javascript" type="text/javascript" src="'+s7viewers.VideoViewer.codebase.contentUrl+"js/"+n.viewerFileName+'"><\/script> \n<div id="'+n.containerId+'"></div> \n<script type="text/javascript"> \n    var videoViewer = new s7viewers.VideoViewer(); \n    videoViewer.setParam("videoserverurl", "'+u(n.videoplayer.component.videoServerUrl)+'"); \n    videoViewer.setParam("serverurl", "'+u(n.videoplayer.component.serverUrl)+'"); \n    videoViewer.setParam("contenturl", "'+u(n.s7params.get("contenturl","/is/content"))+'"); \n'+e+"    videoViewer."+(""!=n.mediaSet.component.asset?'setAsset("'+n.mediaSet.component.asset:'setVideo("'+n.videoplayer.getCurrentAsset())+'"); \n    videoViewer.setParam("stagesize", "$EMBED_WIDTH$,$EMBED_HEIGHT$"); \n\t videoViewer.setParam("emailurl", "'+u(n.emailShare.component.emailurl)+'"); \n'+(n.videoplayer.component.assetSpecificPosterImage||n.videoplayer.component.posterimage?'\t videoViewer.setParam("posterimage", "'+(n.videoplayer.component.assetSpecificPosterImage||n.videoplayer.component.posterimage)+'"); \n':"")+t+i+'\t videoViewer.setContainerId("'+n.containerId+'"); \n\t videoViewer.init(); \n<\/script> \n'}function u(e){if(e&&(0==e.indexOf("http://")||0==e.indexOf("https://")))return e;var t=document.location.protocol+"//"+document.location.host;return e&&0==e.indexOf("/")||(t+="/"),e&&(t+=e),t}function p(e,t){n.updateOrientationMarkers(),n.videoplayer.resize(e,t),n.videoScrubber.resize(0,0),n.controls.resize(e,n.controls.getHeight()),m(e)}function m(t){if(1==n.supportsInline){var i=document.getElementById(n.containerId+"_controls"),s=e.Util.getStyle(i,"display");i.style.display="block",n.videoTime.autoSize();var a=document.getElementById(n.containerId+"_playPauseButton").getBoundingClientRect(),o=document.getElementById(n.containerId+"_videoTime").getBoundingClientRect(),r=document.getElementById(n.containerId+"_videoScrubber").getBoundingClientRect();n.videoScrubber.resize(o.left-a.right-10,r.bottom-r.top),i.style.display=s,!n.container.isPopup()||n.container.isFixedSize()||n.container.supportsNativeFullScreen()||n.fullScreenButton.setCSS(".s7fullscreenbutton","display","none"),h()}}function h(){var e,t=n.videoplayer.supportsVolumeControl(),i=document.getElementById(n.containerId+"_playPauseButton").getBoundingClientRect();t||n.isCaption?(t||(n.mutableVolume.setCSS(".s7mutablevolume","display","none"),e=n.captionButtonPosition,n.closedCaptionButton.setCSS(".s7closedcaptionbutton","right",n.volumeButtonPosition+"px")),n.isCaption?(n.closedCaptionButton.setCSS(".s7closedcaptionbutton","display","block"),e=t?n.videoTimePosition:n.captionButtonPosition):(n.closedCaptionButton.setCSS(".s7closedcaptionbutton","display","none"),e=n.captionButtonPosition)):(n.mutableVolume.setCSS(".s7mutablevolume","display","none"),n.closedCaptionButton.setCSS(".s7closedcaptionbutton","display","none"),e=n.volumeButtonPosition),n.videoTime.setCSS(".s7videotime","right",e+"px"),n.fixTrackCSS&&n.videoScrubber.setCSS(".s7videoscrubber .s7track","width",document.getElementById(n.containerId+"_videoTime").getBoundingClientRect().left-i.right-10+"px"),n.videoScrubber.resize(document.getElementById(n.containerId+"_videoTime").getBoundingClientRect().left-i.right-10,document.getElementById(n.containerId+"_videoScrubber").getBoundingClientRect().height)}function v(e,t){var i,s,n;return e&&e.style&&(s=(t=t.toLowerCase()).replace(/\-([a-z])/g,(function(e,t){return t.toUpperCase()})),(n=e.style[s])||((i=document.defaultView||window).getComputedStyle?n=i.getComputedStyle(e,"").getPropertyValue(t):e.currentStyle&&(n=e.currentStyle[s]))),n||""}if(n.updateCSSMarkers(),n.updateOrientationMarkers(),n.container.isFixedSize()?n.viewerMode="fixed":n.viewerMode=r?"ratio":"free",n.mediaSet=new e.MediaSet(null,n.s7params,n.containerId+"_mediaSet"),n.videoplayer=new e.video.VideoPlayer(n.container,n.s7params,n.containerId+"_videoPlayer"),n.trackingManager.attach(n.videoplayer),n.socialShare=new e.share.SocialShare(n.container,n.s7params,n.containerId+"_socialShare"),n.emailShare=new e.share.EmailShare(n.containerId+"_socialShare",n.s7params,n.containerId+"_emailShare"),n.embedShare=new e.share.EmbedShare(n.containerId+"_socialShare",n.s7params,n.containerId+"_embedShare"),n.linkShare=new e.share.LinkShare(n.containerId+"_socialShare",n.s7params,n.containerId+"_linkShare"),n.twitterShare=new e.share.TwitterShare(n.containerId+"_socialShare",n.s7params,n.containerId+"_twitterShare"),n.facebookShare=new e.share.FacebookShare(n.containerId+"_socialShare",n.s7params,n.containerId+"_facebookShare"),n.emailShare.addEventListener(e.event.SocialEvent.NOTF_SOCIAL_ACTIVATED,l,!1),n.embedShare.addEventListener(e.event.SocialEvent.NOTF_SOCIAL_ACTIVATED,l,!1),n.linkShare.addEventListener(e.event.SocialEvent.NOTF_SOCIAL_ACTIVATED,l,!1),n.twitterShare.addEventListener(e.event.SocialEvent.NOTF_SOCIAL_ACTIVATED,l,!1),n.facebookShare.addEventListener(e.event.SocialEvent.NOTF_SOCIAL_ACTIVATED,l,!1),n.socialShare.addEventListener("mouseover",(function(e){n.controls.allowAutoHide(!1)})),n.socialShare.addEventListener("mouseout",(function(e){n.controls.allowAutoHide(!0)})),n.linkShare.setContentUrl(document.URL),n.emailShare.setOriginUrl(window.location.hostname),n.emailShare.setContentUrl(document.URL),n.supportsInline=n.videoplayer.supportsInline(),n.controls=new e.common.ControlBar(n.container,n.s7params,n.containerId+"_controls"),n.controls.setCSS(".s7controlbar","visibility","hidden"),n.controls.attachView(n.videoplayer,!1),"iphone"!=e.browser.device.name&&n.controls.attach(n.socialShare),n.socialShare.addTrackedComponent(n.controls),n.playPauseButton=new e.common.PlayPauseButton(n.containerId+"_controls",n.s7params,n.containerId+"_playPauseButton"),n.videoScrubber=new e.video.VideoScrubber(n.containerId+"_controls",n.s7params,n.containerId+"_videoScrubber"),n.fixTrackCSS="310px"==e.Util.getStyle(n.videoScrubber.component.track,"width")||"365px"==e.Util.getStyle(n.videoScrubber.component.track,"width"),n.videoTime=new e.VideoTime(n.containerId+"_controls",n.s7params,n.containerId+"_videoTime"),n.closedCaptionButton=new e.common.ClosedCaptionButton(n.containerId+"_controls",n.s7params,n.containerId+"_closedCaptionButton"),n.closedCaptionButton.addEventListener("click",(function(){n.videoplayer.setCaptionEnabled(n.closedCaptionButton.isSelected())})),n.closedCaptionButton.setSelected(n.videoplayer.getCaptionEnabled()),n.videoplayer.setCaptionEnabled(n.videoplayer.getCaptionEnabled()),n.storedCaptionEnabled=n.videoplayer.getCaptionEnabled(),n.captionButtonPosition=v(document.getElementById(n.containerId+"_closedCaptionButton"),"right"),n.captionButtonPosition=Number(n.captionButtonPosition.substring(0,n.captionButtonPosition.length-2)),n.mutableVolume=new e.video.MutableVolume(n.containerId+"_controls",n.s7params,n.containerId+"_mutableVolume"),n.mutableVolume.setSelected(n.videoplayer.muted()),n.volumeButtonPosition=v(document.getElementById(n.containerId+"_mutableVolume"),"right"),n.volumeButtonPosition=Number(n.volumeButtonPosition.substring(0,n.volumeButtonPosition.length-2)),n.videoTimePosition=v(document.getElementById(n.containerId+"_videoTime"),"right"),n.videoTimePosition=Number(n.videoTimePosition.substring(0,n.videoTimePosition.length-2)),n.s7params.get("caption")?n.curCaption=n.s7params.params.caption:n.isCaption=!1,n.s7params.get("navigation")&&(n.isNavigation=n.s7params.get("navigation")),n.fullScreenButton=new e.common.FullScreenButton(n.containerId+"_controls",n.s7params,n.containerId+"_fullScreenButton"),n.mediaSet.addEventListener(e.AssetEvent.NOTF_SET_PARSED,(function(t){var i=t.s7event.asset;if(!(i instanceof e.MediaSetDesc))throw new Error("Failed to get meta data for video: "+t.s7event.asset);var s={};if("ratio"==n.viewerMode){var a=i.items[0],o=a.width/a.height;n.container.setModifier({aspect:o})}s.navigation=n.isNavigation?n.isNavigation:",0",s.posterimage=n.isPosterImage?n.isPosterImage:"",s.caption=n.curCaption?n.curCaption:",0",n.videoplayer.setModifier(s),i.type==e.ItemDescType.VIDEO_SET||i.type==e.ItemDescType.VIDEO_GROUP?n.videoplayer.setItem(i):n.videoplayer.setItem(i.items[0]);h(),p(n.container.getWidth(),n.container.getHeight()),n.emailShare&&n.emailShare.setThumbnail(t.s7event.asset.name);n.embedShare&&n.embedShare.setEmbedCode(c());null==n.handlers.initComplete||"function"!=typeof n.handlers.initComplete||n.firstMediasetParsed||(void 0===window.s7sdk&&(window.s7sdk=e),n.handlers.initComplete());n.firstMediasetParsed=!0,n.controls&&n.controls.setCSS(".s7controlbar","visibility","inherit")}),!1),n.container.addEventListener(e.event.ResizeEvent.COMPONENT_RESIZE,(function(e){if(void 0===e.target||e.target==document.getElementById(n.containerId+"_container")){if(!n.container.isInLayout())return;p(e.s7event.w,e.s7event.h),n.fullScreenButton.setSelected(n.container.isFullScreen())}}),!1),n.container.addEventListener(e.event.ResizeEvent.FULLSCREEN_RESIZE,(function(e){p(e.s7event.w,e.s7event.h),n.fullScreenButton.setSelected(n.container.isFullScreen()),n.container.isFullScreen()?n.onFullScreenEnter(e):n.onFullScreenExit(e)}),!1),n.container.addEventListener(e.event.ResizeEvent.REMOVED_FROM_LAYOUT,(function(t){e.browser.device.name;n.videoplayer.getCapabilityState().hasCapability(e.VideoCapabilityState.PAUSE)&&(n.storedPlayingState=!0,e.Logger.log(e.Logger.INFO,"Pause video"),n.videoplayer.pause())}),!1),n.container.addEventListener(e.event.ResizeEvent.ADDED_TO_LAYOUT,(function(t){"desktop"!=e.browser.device.name||n.storedPlayingState&&(n.videoplayer.play(),n.storedPlayingState=!1)}),!1),n.container.addEventListener(e.event.ResizeEvent.SIZE_MARKER_CHANGE,(function(e){n.updateCSSMarkers()}),!1),n.videoplayer.addEventListener(e.event.CapabilityStateEvent.NOTF_VIDEO_CAPABILITY_STATE,(function(t){var i=t.s7event.state;i.hasCapability(e.VideoCapabilityState.PAUSE)?n.playPauseButton.setSelected(!1):(i.hasCapability(e.VideoCapabilityState.PLAY)||i.hasCapability(e.VideoCapabilityState.REPLAY))&&n.playPauseButton.setSelected(!0);n.playPauseButton.enableReplay(i.hasCapability(e.VideoCapabilityState.REPLAY))}),!1),n.videoplayer.addEventListener(e.event.VideoEvent.NOTF_DURATION,(function(e){n.videoTime.setDuration(e.s7event.data),n.videoScrubber.setDuration(e.s7event.data)}),!1),n.videoplayer.addEventListener(e.event.VideoEvent.NOTF_LOAD_PROGRESS,(function(e){n.videoScrubber.setLoadedPosition(e.s7event.data)}),!1),n.videoplayer.addEventListener(e.event.VideoEvent.NOTF_CURRENT_TIME,(function(e){n.videoTime.setPlayedTime(e.s7event.data),n.videoScrubber.setPlayedTime(e.s7event.data)}),!1),n.videoplayer.addEventListener(e.event.VideoEvent.NOTF_NAVIGATION,(function(e){n.videoScrubber.setNavigation(e.s7event.data)}),!1),n.playPauseButton.addEventListener("click",(function(e){if(n.playPauseButton.isSelected())n.videoplayer.pause();else{n.videoplayer.getDuration()-n.videoplayer.getCurrentTime()<=1&&n.videoplayer.seek(0),n.videoplayer.play()}})),n.videoScrubber.addEventListener(e.SliderEvent.NOTF_SLIDER_UP,(function(e){n.videoplayer.seek(e.s7event.position*n.videoplayer.getDuration())}),!1),n.mutableVolume.addEventListener("click",(function(e){n.mutableVolume.isSelected()?n.videoplayer.mute():(n.videoplayer.unmute(),n.videoplayer.setVolume(n.mutableVolume.getPosition()))})),n.mutableVolume.addEventListener(e.SliderEvent.NOTF_SLIDER_DOWN,(function(e){n.videoplayer.unmute()}),!1),n.mutableVolume.addEventListener(e.SliderEvent.NOTF_SLIDER_MOVE,d,!1),n.mutableVolume.addEventListener(e.SliderEvent.NOTF_SLIDER_UP,d,!1),n.fullScreenButton.addEventListener("click",(function(e){n.container.isFullScreen()?n.container.cancelFullScreen():n.container.requestFullScreen()})),n.trackingManager.setCallback((function(t,i,s,a,o){!n.handlers.trackEvent&&1!=n.isConfig2Exist&&e.Modifier.parse(n.s7params.get("launch","true"),[!0]).values[0]&&"undefined"!=typeof _satellite&&_satellite._dmviewers_v001&&(n.handlers.trackEvent=_satellite._dmviewers_v001().trackingFn);n.appMeasurementBridge&&n.appMeasurementBridge.track(t,i,s,a,o);if(n.handlers.trackEvent){void 0===window.s7sdk&&(window.s7sdk=e);var r=n.containerId;n.handlers.trackEvent(r,i,s,a,o)}"s7ComponentEvent"in window&&s7ComponentEvent(t,i,s,a,o)})),"function"==typeof AppMeasurementBridge&&1==n.isConfig2Exist&&(n.appMeasurementBridge=new AppMeasurementBridge(n.trackingParams),n.appMeasurementBridge.setVideoPlayer(n.videoplayer)),"ratio"==n.viewerMode&&(t.style.height="auto"),n.container.getWidth()>0&&n.container.getHeight()>0&&p(n.container.getWidth(),n.container.getHeight()),n.supportsInline){n.container.getWidth();m()}else n.controls.setCSS(".s7controlbar","display","none");null!=n.onInitComplete&&"function"==typeof n.onInitComplete&&n.onInitComplete(),n.s7params.get("asset",null,"MediaSet")||(h(),n.embedShare&&n.embedShare.setEmbedCode(c()),null!=n.handlers.initComplete&&"function"==typeof n.handlers.initComplete&&n.handlers.initComplete(),n.controls.setCSS(".s7controlbar","visibility","inherit"))}this.s7params.addEventListener(e.Event.SDK_READY,(function(){n.initSiteCatalyst(n.s7params,a)}),!1),this.s7params.setProvidedSdk(this.sdkProvided),this.s7params.init()},s7viewers.VideoViewer.prototype.setParam=function(e,t){this.isDisposed||(this.params[e]=t)},s7viewers.VideoViewer.prototype.getParam=function(e){var t=e.toLowerCase();for(var i in this.params)if(i.toLowerCase()==t)return this.params[i];return null},s7viewers.VideoViewer.prototype.setParams=function(e){if(!this.isDisposed)for(var t=e.split("&"),i=0;i<t.length;i++){var s=t[i].split("=");s.length>1&&this.setParam(s[0],decodeURIComponent(t[i].split("=")[1]))}},s7viewers.VideoViewer.prototype.s7sdkUtilsAvailable=function(){return s7viewers.VideoViewer.codebase.isDAM?void 0!==s7viewers.s7sdk:"undefined"!=typeof s7classic&&void 0!==s7classic.s7sdk},s7viewers.VideoViewer.prototype.resize=function(e,t){this.container.resize(e,t)},s7viewers.VideoViewer.prototype.init=function(){if(!this.isDisposed&&!this.initCalled){if(this.initCalled=!0,this.initializationComplete)return this;this.lockurldomains=Boolean(Number(this.params.lockurldomains))||void 0===this.params.lockurldomains?1:0;var t=document.getElementById(this.containerId);t&&(""!=t.className?-1!=t.className.indexOf(s7viewers.VideoViewer.cssClassName)||(t.className+=" "+s7viewers.VideoViewer.cssClassName):t.className=s7viewers.VideoViewer.cssClassName),this.s7sdkNamespace=s7viewers.VideoViewer.codebase.isDAM?"s7viewers":"s7classic";var i=this.getContentUrl()+this.sdkBasePath+"js/s7sdk/utils/Utils.js?namespace="+this.s7sdkNamespace;if(document.scripts?document.scripts:document.getElementsByTagName("script"),this.s7sdkUtilsAvailable()){if(e=s7viewers.VideoViewer.codebase.isDAM?s7viewers.s7sdk:s7classic.s7sdk,this.sdkProvided=!0,this.isDisposed)return;e.Util.init(),this.includeViewer(),this.initializationComplete=!0}else if(!this.s7sdkUtilsAvailable()&&(s7viewers.VideoViewer.codebase.isDAM?s7viewers.S7SDK_S7VIEWERS_LOAD_STARTED:s7viewers.S7SDK_S7CLASSIC_LOAD_STARTED)){this.sdkProvided=!0;var s=this,n=setInterval((function(){if(s.s7sdkUtilsAvailable()){if(clearInterval(n),e=s7viewers.VideoViewer.codebase.isDAM?s7viewers.s7sdk:s7classic.s7sdk,s.isDisposed)return;e.Util.init(),s.includeViewer(),s.initializationComplete=!0}}),100)}else{this.utilsScriptElm=document.createElement("script"),this.utilsScriptElm.setAttribute("language","javascript"),this.utilsScriptElm.setAttribute("type","text/javascript");var a=document.getElementsByTagName("head")[0],o=this;function r(){if(!o.utilsScriptElm.executed&&(o.utilsScriptElm.executed=!0,e=s7viewers.VideoViewer.codebase.isDAM?s7viewers.s7sdk:s7classic.s7sdk,o.s7sdkUtilsAvailable()&&e.Util)){if(o.isDisposed)return;e.Util.init(),o.includeViewer(),o.initializationComplete=!0,o.utilsScriptElm.onreadystatechange=null,o.utilsScriptElm.onload=null,o.utilsScriptElm.onerror=null}}void 0!==o.utilsScriptElm.readyState?(o.utilsScriptElm.onreadystatechange=function(){"loaded"==o.utilsScriptElm.readyState?a.appendChild(o.utilsScriptElm):"complete"==o.utilsScriptElm.readyState&&r()},o.utilsScriptElm.setAttribute("src",i)):(o.utilsScriptElm.onload=function(){r()},o.utilsScriptElm.onerror=function(){},o.utilsScriptElm.setAttribute("src",i),a.appendChild(o.utilsScriptElm),o.utilsScriptElm.setAttribute("data-src",o.utilsScriptElm.getAttribute("src")),o.utilsScriptElm.setAttribute("src","?namespace="+this.s7sdkNamespace)),s7viewers.VideoViewer.codebase.isDAM?s7viewers.S7SDK_S7VIEWERS_LOAD_STARTED=!0:s7viewers.S7SDK_S7CLASSIC_LOAD_STARTED=!0}return this}},s7viewers.VideoViewer.prototype.getDomScriptTag=function(e){var t;t=document.scripts?document.scripts:document.getElementsByTagName("script");for(var i=0;i<t.length;i++)if(t[i]&&null!=t[i].getAttribute("src")&&-1!=t[i].getAttribute("src").indexOf(e))return t[i];return null},s7viewers.VideoViewer.prototype.getDomain=function(e){var t=/(^http[s]?:\/\/[^\/]+)/i.exec(e);return null==t?"":t[1]},s7viewers.VideoViewer.prototype.setAsset=function(e,t){if(!this.isDisposed){var i=null,s=null,n=null;t&&("[object String]"===Object.prototype.toString.apply(t)?i=t:"object"==typeof t&&(t.caption&&(i=t.caption),t.navigation&&(s=t.navigation),t.posterimage&&(n=t.posterimage))),this.mediaSet?(this.mediaSet.setAsset(e),i?(this.isCaption=!0,this.curCaption=i+",1",this.videoplayer.setCaption(i),this.videoplayer.setCaptionEnabled(this.storedCaptionEnabled)):(this.isCaption=!1,this.curCaption=null,this.videoplayer.setCaptionEnabled(!1)),this.isNavigation=s||null,this.isPosterImage=n||null,this.closedCaptionButton.setSelected(this.storedCaptionEnabled),this.emailShare&&this.emailShare.setThumbnail(e)):this.setParam("asset",e)}},s7viewers.VideoViewer.prototype.setVideo=function(e,t){if(!this.isDisposed){var i=null,s=null,n=null;t&&("[object String]"===Object.prototype.toString.apply(t)?i=t:"object"==typeof t&&(t.caption&&(i=t.caption),t.navigation&&(s=t.navigation),t.posterimage&&(n=t.posterimage))),this.videoplayer?(this.videoplayer.setVideo(e,n),i?(this.isCaption=!0,this.curCaption=i+",1",this.videoplayer.setCaption(i),this.videoplayer.setCaptionEnabled(this.storedCaptionEnabled)):(this.isCaption=!1,this.curCaption=null,this.videoplayer.setCaptionEnabled(!1)),this.isNavigation=s||null,this.isPosterImage=n||null,this.closedCaptionButton.setSelected(this.storedCaptionEnabled)):(e&&this.setParam("video",e),i&&this.setParam("caption",i),s&&this.setParam("navigation",s),n&&this.setParam("posterimage",n))}},s7viewers.VideoViewer.prototype.setLocalizedTexts=function(e){this.isDisposed||(this.s7params?this.s7params.setLocalizedTexts(e):this.setParam("localizedtexts",e))},s7viewers.VideoViewer.prototype.initSiteCatalyst=function(t,i){if(t.get("asset",null,"MediaSet")){var s=t.get("asset",null,"MediaSet").split(",")[0].split(":")[0];if(this.isConfig2Exist=!1,-1!=s.indexOf("/")){var n=e.MediaSetParser.findCompanyNameInAsset(s),a=t.get("config2");if(this.isConfig2Exist=""!=a&&void 0!==a,this.isConfig2Exist){this.trackingParams={siteCatalystCompany:n,config2:a,isRoot:t.get("serverurl"),contentUrl:this.getContentUrl()};var o=this.getContentUrl()+"../AppMeasurementBridge.jsp?company="+n+(""==a?"":"&preset="+a);t.get("serverurl",null)&&(o+="&isRoot="+t.get("serverurl"));var r=document.createElement("script");r.setAttribute("language","javascript"),r.setAttribute("type","text/javascript"),r.setAttribute("src",o);var l=document.getElementsByTagName("head");r.onload=r.onerror=function(){r.executed||(r.executed=!0,"function"==typeof i&&i(),r.onreadystatechange=null,r.onload=null,r.onerror=null)},r.onreadystatechange=function(){"complete"!=r.readyState&&"loaded"!=r.readyState||setTimeout((function(){r.executed||(r.executed=!0,"function"==typeof i&&i()),r.onreadystatechange=null,r.onload=null,r.onerror=null}),0)},l[0].appendChild(r)}else"function"==typeof i&&i()}}else"function"==typeof i&&i()},s7viewers.VideoViewer.prototype.onFullScreenEnter=function(t){this.storedSocialShareDisplayProp=e.Util.getStyle(this.socialShare.getObj(),"display"),this.socialShare.setCSS(".s7socialshare","display","none")},s7viewers.VideoViewer.prototype.onFullScreenExit=function(e){this.socialShare.setCSS(".s7socialshare","display",this.storedSocialShareDisplayProp)},s7viewers.VideoViewer.prototype.getComponent=function(e){if(!this.isDisposed)switch(e){case"container":return this.container||null;case"mediaSet":return this.mediaSet||null;case"videoPlayer":return this.videoplayer||null;case"controls":return this.controls||null;case"videoScrubber":return this.videoScrubber||null;case"videoTime":return this.videoTime||null;case"mutableVolume":return this.mutableVolume||null;case"playPauseButton":return this.playPauseButton||null;case"closedCaptionButton":return this.closedCaptionButton||null;case"fullScreenButton":return this.fullScreenButton||null;case"twitterShare":return this.twitterShare||null;case"facebookShare":return this.facebookShare||null;case"linkShare":return this.linkShare||null;case"socialShare":return this.socialShare||null;case"emailShare":return this.emailShare||null;case"embedShare":return this.embedShare||null;case"parameterManager":return this.s7params||null;default:return null}},s7viewers.VideoViewer.prototype.setHandlers=function(e){if(!this.isDisposed&&!this.initCalled)for(var t in this.handlers=[],e)e.hasOwnProperty(t)&&"function"==typeof e[t]&&(this.handlers[t]=e[t])},s7viewers.VideoViewer.prototype.getModifiers=function(){return this.modifiers},s7viewers.VideoViewer.prototype.setModifier=function(t){var i,s,n,a,o,r;if(!this.isDisposed)for(i in t)if(this.modifiers.hasOwnProperty(i)){s=this.modifiers[i];try{if(a=t[i],1==(o=!1===s.parseParams?new e.Modifier([""!=a?a:s.defaults[0]]):e.Modifier.parse(a,s.defaults,s.ranges)).values.length)this[i]=o.values[0],this.setModifierInternal(i);else if(o.values.length>1){for(n={},r=0;r<o.values.length;r++)n[s.params[r]]=o.values[r];this[i]=n,this.setModifierInternal(i)}}catch(e){throw new Error("Unable to process modifier: '"+i+"'. "+e)}}},s7viewers.VideoViewer.prototype.setModifierInternal=function(e){e},s7viewers.VideoViewer.prototype.parseMods=function(){var t,i,s,n,a,o;for(t in this.modifiers)if(this.modifiers.hasOwnProperty(t)){i=this.modifiers[t];try{if(n=this.s7params.get(t,""),1==(a=!1===i.parseParams?new e.Modifier([""!=n?n:i.defaults[0]]):e.Modifier.parse(n,i.defaults,i.ranges)).values.length)this[t]=a.values[0];else if(a.values.length>1){for(s={},o=0;o<a.values.length;o++)s[i.params[o]]=a.values[o];this[t]=s}}catch(e){throw new Error("Unable to process modifier: '"+t+"'. "+e)}}},s7viewers.VideoViewer.prototype.updateCSSMarkers=function(){var t,i=this.container.getSizeMarker();i!=e.common.Container.SIZE_MARKER_NONE&&(i==e.common.Container.SIZE_MARKER_LARGE?t="s7size_large":i==e.common.Container.SIZE_MARKER_SMALL?t="s7size_small":i==e.common.Container.SIZE_MARKER_MEDIUM&&(t="s7size_medium"),this.containerId&&this.setNewSizeMarker(this.containerId,t),this.reloadInnerComponents())},s7viewers.VideoViewer.prototype.reloadInnerComponents=function(){for(var e=this.s7params.getRegisteredComponents(),t=0;t<e.length;t++)e[t]&&e[t].restrictedStylesInvalidated()&&e[t].reload()},s7viewers.VideoViewer.prototype.setNewSizeMarker=function(e,t){var i,s=document.getElementById(e).className,n=/^(.*)(s7size_small|s7size_medium|s7size_large)(.*)$/gi;i=s.match(n)?s.replace(n,"$1"+t+"$3"):s+" "+t,s!=i&&(document.getElementById(e).className=i)},s7viewers.VideoViewer.prototype.dispose=function(){if(this.appMeasurementBridge&&(this.appMeasurementBridge.dispose(),this.appMeasurementBridge=null),this.trackingManager&&(this.trackingManager.dispose(),this.trackingManager=null),this.videoplayer&&(this.videoplayer.dispose(),this.videoplayer=null),this.facebookShare&&(this.facebookShare.dispose(),this.facebookShare=null),this.twitterShare&&(this.twitterShare.dispose(),this.twitterShare=null),this.linkShare&&(this.linkShare.dispose(),this.linkShare=null),this.embedShare&&(this.embedShare.dispose(),this.embedShare=null),this.emailShare&&(this.emailShare.dispose(),this.emailShare=null),this.socialShare&&(this.socialShare.dispose(),this.socialShare=null),this.closedCaptionButton&&(this.closedCaptionButton.dispose(),this.closedCaptionButton=null),this.fullScreenButton&&(this.fullScreenButton.dispose(),this.fullScreenButton=null),this.mutableVolume&&(this.mutableVolume.dispose(),this.mutableVolume=null),this.videoTime&&(this.videoTime.dispose(),this.videoTime=null),this.videoScrubber&&(this.videoScrubber.dispose(),this.videoScrubber=null),this.playPauseButton&&(this.playPauseButton.dispose(),this.playPauseButton=null),this.controls&&(this.controls.dispose(),this.controls=null),this.mediaSet&&(this.mediaSet.dispose(),this.mediaSet=null),this.s7params&&(this.s7params.dispose(),this.s7params=null),this.container){for(var e=[s7viewers.VideoViewer.cssClassName,"s7touchinput","s7mouseinput","s7size_large","s7size_small","s7size_medium"],t=document.getElementById(this.containerId).className.split(" "),i=0;i<e.length;i++){var s=t.indexOf(e[i]);-1!=s&&t.splice(s,1)}document.getElementById(this.containerId).className=t.join(" "),this.container.dispose(),this.container=null}this.params={},this.handlers=[],this.isDisposed=!0},s7viewers.VideoViewer.prototype.updateOrientationMarkers=function(){var e;this.isOrientationMarkerForcedChanged||(e=window.innerWidth>window.innerHeight?"s7device_landscape":"s7device_portrait",-1==document.getElementById(this.containerId).className.indexOf(e)&&(this.setNewOrientationMarker(this.containerId,e),this.reloadInnerComponents()))},s7viewers.VideoViewer.prototype.setNewOrientationMarker=function(e,t){var i,s=document.getElementById(e).className,n=/^(.*)(s7device_landscape|s7device_portrait)(.*)$/gi;i=s.match(n)?s.replace(n,"$1"+t+"$3"):s+" "+t,s!=i&&(document.getElementById(e).className=i)},s7viewers.VideoViewer.prototype.forceDeviceOrientationMarker=function(e){switch(e){case"s7device_portrait":case"s7device_landscape":this.isOrientationMarkerForcedChanged=!0,this.containerId&&this.setNewOrientationMarker(this.containerId,e),this.reloadInnerComponents();break;case null:this.isOrientationMarkerForcedChanged=!1,this.updateOrientationMarkers()}},s7viewers.VideoViewer.prototype.getURLParameter=function(t){return e.ParameterManager.getSanitizedParameters(e.query.params,this.lockurldomains)[t]},s7viewers.VideoViewer.prototype.addClass=function(e,t){var i=document.getElementById(e).className.split(" ");-1==i.indexOf(t)&&(i[i.length]=t,document.getElementById(e).className=i.join(" "))}}();